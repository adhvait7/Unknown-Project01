<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>

    <link rel="stylesheet" href="dashstyles.css" />
    <script>
      fetch("/check-session", { credentials: "include" }) // ‚úÖ Ensures session cookies are sent
        .then((response) => response.json())
        .then((data) => {
          console.log("üì¢ Session check response:", data);
          if (!data.isLoggedIn) {
            console.warn("üö® No session found! Redirecting to index.html...");
            window.location.href = "/index.html";
          } else {
            console.log("‚úÖ Session valid! Showing dashboard.");
            document.body.style.display = "block"; // Show the page
          }
        })
        .catch((error) => console.error("‚ùå Error checking session:", error));
    </script>
  </head>
  <body>
    <div class="sidebar">
      <h2>Dashboard</h2>
      <a href="#home">Home</a>
      <a href="#projects">Projects</a>
      <a href="#profile">Profile</a>
      <a href="#settings">Settings</a>
      <a href="#logout">Logout</a>
    </div>

    <div class="main-content">
      <div class="header">
        <h1>Welcome, Adhvait</h1>
        <a href="/logout">
          <button>Logout</button>
        </a>
      </div>

      <div class="content">
        <div class="card">
          <h3>Projects Overview</h3>
          <p>You have 3 active projects. Keep up the good work!</p>
        </div>

        <div class="card">
          <h3>Profile Completion</h3>
          <p>Your profile is 80% complete. Add more details to improve it.</p>
        </div>

        <div class="card">
          <h3>Recent Activity</h3>
          <ul>
            <li>Updated Discord Chat Bot - 2 hours ago</li>
            <li>Added new features to JetCraft Game - Yesterday</li>
            <li>Reviewed Student Attendance System - Last week</li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
